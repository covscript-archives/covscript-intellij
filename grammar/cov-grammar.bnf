{
  parserClass='org.covscript.lang.CovParser'
  extends='com.intellij.extapi.psi.ASTWrapperPsiElement'
  psiClassPrefix='Cov'
  psiImplClassSuffix='Impl'
  psiPackage='org.covscript.lang.psi'
  psiImplPackage='org.covscript.lang.psi.impl'

  tokenTypeClass='org.covscript.lang.CovTokenType'
  elementTypeHolderClass='org.covscript.lang.psi.CovTypes'
  elementTypeClass='org.covscript.lang.CovTokenType'
  psiImplUtilClass='org.covscript.lang.psi.impl.CovPsiImplUtils'
}

file ::=
 (fileHeader endOfLine)*
 statement*

number ::= NUM
symbol ::= SYM
assign ::= EQ
true ::= TRUE_KEYWORD
false ::= FALSE_KEYWORD
null ::= NULL_KEYWORD
comment ::= LINE_COMMENT+
string ::= STR
endOfLine ::= EOF

fileHeader ::= importDeclaration
 | usingDeclaration
 | comment

importDeclaration ::= IMPORT_KEYWORD symbol
packageDeclaration ::= PACKAGE_KEYWORD symbol
variableDeclaration ::= (CONST_KEYWORD)? VAR_KEYWORD symbol assign expression
functionDeclaration ::= FUNCTION_KEYWORD symbol LEFT_BRACKET RIGHT_BRACKET endOfLine (statement endOfLine)* END_KEYWORD
usingDeclaration ::= USING_KEYWORD symbol
namespaceDeclaration ::= NAMESPACE_KEYWORD statement* END_KEYWORD

assignment ::= lhs assign expression
lhs ::= symbol (LEFT_S_BRACKET expression RIGHT_S_BRACKET)?
ifStatement ::= IF_KEYWORD expression (ELSE_KEYWORD expression)? END_KEYWORD
whileStatement ::= WHILE_KEYWORD expression endOfLine (statement endOfLine)* END_KEYWORD
statement ::= endOfLine
 | assignment
 | variableDeclaration
 | functionDeclaration
 | ifStatement
 | whileStatement
 | comment
 | namespaceDeclaration

boolean ::= true | false
expression ::= ternaryExpression | nonTernaryExpression
nonTernaryExpression ::= newExpression | symbol | number | boolean | null | string | array
newExpression ::= (new | gcnew) type
ternaryExpression ::= nonTernaryExpression QUESTION_SIGN expression COLON expression
array ::= LEFT_B_BRACKET (expression (COMMA expression)*)? RIGHT_B_BRACKET

new ::= NEW_KEYWORD
gcnew ::= GCNEW_KEYWORD

type ::= symbol (DOT symbol)*

